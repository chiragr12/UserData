Error: install failed with status: 500 - chaincode installed to peer but could not build chaincode: docker build failed: docker image build failed: docker build failed: Error returned from build: 1 "+ INPUT_DIR=/chaincode/input
+ OUTPUT_DIR=/chaincode/output
+ cp -R /chaincode/input/src/. /chaincode/output
+ cd /chaincode/output
+ '[' -f package-lock.json -o -f npm-shrinkwrap.json ]
+ npm ci '--only=production'
npm WARN config only Use `--omit=dev` to omit dev dependencies from the install.
npm WARN old lockfile 
npm WARN old lockfile The package-lock.json file was created with an old version of npm,
npm WARN old lockfile so supplemental metadata must be fetched from the registry.
npm WARN old lockfile 
npm WARN old lockfile This is a one-time fix-up, please be patient...
npm WARN old lockfile 
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'fabric-contract-api@1.4.1',
npm WARN EBADENGINE   required: { node: '^8.9.0', npm: '^5.5.1' },
npm WARN EBADENGINE   current: { node: 'v18.15.0', npm: '9.5.0' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'fabric-shim@1.4.1',
npm WARN EBADENGINE   required: { node: '^8.9.0', npm: '^5.5.1' },
npm WARN EBADENGINE   current: { node: 'v18.15.0', npm: '9.5.0' }
npm WARN EBADENGINE }
npm WARN deprecated uuid@3.3.3: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.
npm WARN deprecated debug@3.2.6: Debug versions >=3.2.0 <3.2.7 || >=4 <4.3.1 have a low-severity ReDos regression when used in a Node.js environment. It is recommended you upgrade to 3.2.7 or 4.3.1. (https://github.com/visionmedia/debug/issues/797)
npm WARN deprecated mkdirp@0.5.1: Legacy versions of mkdirp are no longer supported. Please update to mkdirp 1.x. (Note that the API surface has changed to use Promises in 1.x.)
npm WARN deprecated argv@0.0.2: Package no longer supported. Contact Support at https://www.npmjs.com/support for more info.
npm WARN deprecated @google/maps@1.0.1: Please use @googlemaps/google-maps-services-js instead.
npm notice 
npm notice New minor version of npm available! 9.5.0 -> 9.6.3
npm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.6.3>
npm notice Run `npm install -g npm@9.6.3` to update!
npm notice 
npm ERR! code 1
npm ERR! path /chaincode/output/node_modules/@ampretia/x509
npm ERR! command failed
npm ERR! command sh -c node-gyp rebuild
npm ERR! make: Entering directory '/chaincode/output/node_modules/@ampretia/x509/build'
npm ERR!   CXX(target) Release/obj.target/x509/src/addon.o
npm ERR! make: Leaving directory '/chaincode/output/node_modules/@ampretia/x509/build'
npm ERR! gyp info it worked if it ends with ok
npm ERR! gyp info using node-gyp@9.3.1
npm ERR! gyp info using node@18.15.0 | linux | x64
npm ERR! gyp info find Python using Python version 3.10.10 found at "/usr/bin/python3"
npm ERR! gyp http GET https://unofficial-builds.nodejs.org/download/release/v18.15.0/node-v18.15.0-headers.tar.gz
npm ERR! gyp http 200 https://unofficial-builds.nodejs.org/download/release/v18.15.0/node-v18.15.0-headers.tar.gz
npm ERR! gyp http GET https://unofficial-builds.nodejs.org/download/release/v18.15.0/SHASUMS256.txt
npm ERR! gyp http 200 https://unofficial-builds.nodejs.org/download/release/v18.15.0/SHASUMS256.txt
npm ERR! gyp info spawn /usr/bin/python3
npm ERR! gyp info spawn args [
npm ERR! gyp info spawn args   '/usr/local/lib/node_modules/npm/node_modules/node-gyp/gyp/gyp_main.py',
npm ERR! gyp info spawn args   'binding.gyp',
npm ERR! gyp info spawn args   '-f',
npm ERR! gyp info spawn args   'make',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/chaincode/output/node_modules/@ampretia/x509/build/config.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/usr/local/lib/node_modules/npm/node_modules/node-gyp/addon.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/root/.cache/node-gyp/18.15.0/include/node/common.gypi',
npm ERR! gyp info spawn args   '-Dlibrary=shared_library',
npm ERR! gyp info spawn args   '-Dvisibility=default',
npm ERR! gyp info spawn args   '-Dnode_root_dir=/root/.cache/node-gyp/18.15.0',
npm ERR! gyp info spawn args   '-Dnode_gyp_dir=/usr/local/lib/node_modules/npm/node_modules/node-gyp',
npm ERR! gyp info spawn args   '-Dnode_lib_file=/root/.cache/node-gyp/18.15.0/<(target_arch)/node.lib',
npm ERR! gyp info spawn args   '-Dmodule_root_dir=/chaincode/output/node_modules/@ampretia/x509',
npm ERR! gyp info spawn args   '-Dnode_engine=v8',
npm ERR! gyp info spawn args   '--depth=.',
npm ERR! gyp info spawn args   '--no-parallel',
npm ERR! gyp info spawn args   '--generator-output',
npm ERR! gyp info spawn args   'build',
npm ERR! gyp info spawn args   '-Goutput_dir=.'
npm ERR! gyp info spawn args ]
npm ERR! gyp info spawn make
npm ERR! gyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]
npm ERR! In file included from ../../../nan/nan_converters.h:67,
npm ERR!                  from ../../../nan/nan.h:222,
npm ERR!                  from ../include/x509.h:6,
npm ERR!                  from ../src/addon.cc:5:
npm ERR! ../../../nan/nan_converters_43_inl.h: In static member function 'static Nan::imp::ToFactoryBase<v8::Boolean>::return_t Nan::imp::ToFactory<v8::Boolean>::convert(v8::Local<v8::Value>)':
npm ERR! ../../../nan/nan_converters_43_inl.h:18:49: error: cannot convert 'v8::Local<v8::Context>' to 'v8::Isolate*'
npm ERR!    18 |       val->To ## TYPE(isolate->GetCurrentContext())                            \
npm ERR!       |                       ~~~~~~~~~~~~~~~~~~~~~~~~~~^~
npm ERR!       |                                                 |
npm ERR!       |                                                 v8::Local<v8::Context>
npm ERR! ../../../nan/nan_converters_43_inl.h:22:1: note: in expansion of macro 'X'
npm ERR!    22 | X(Boolean)
npm ERR!       | ^
npm ERR! In file included from /root/.cache/node-gyp/18.15.0/include/node/v8-primitive.h:11,
npm ERR!                  from /root/.cache/node-gyp/18.15.0/include/node/v8-object.h:11,
npm ERR!                  from /root/.cache/node-gyp/18.15.0/include/node/v8-array-buffer.h:13,
npm ERR!                  from /root/.cache/node-gyp/18.15.0/include/node/v8.h:24,
npm ERR!                  from /root/.cache/node-gyp/18.15.0/include/node/node.h:73,
npm ERR!                  from ../include/addon.h:4,
npm ERR!                  from ../src/addon.cc:4:
npm ERR! /root/.cache/node-gyp/18.15.0/include/node/v8-value.h:398:37: note:   initializing argument 1 of 'v8::Local<v8::Boolean> v8::Value::ToBoolean(v8::Isolate*) const'
npm ERR!   398 |   Local<Boolean> ToBoolean(Isolate* isolate) const;
npm ERR!       |                            ~~~~~~~~~^~~~~~~
npm ERR! ../../../nan/nan_converters_43_inl.h: In static member function 'static Nan::imp::ValueFactoryBase<bool>::return_t Nan::imp::ToFactory<bool>::convert(v8::Local<v8::Value>)':
npm ERR! ../../../nan/nan_converters_43_inl.h:37:55: error: cannot convert 'v8::Local<v8::Context>' to 'v8::Isolate*'
npm ERR!    37 |   return val->NAME ## Value(isolate->GetCurrentContext());                     \
npm ERR!       |                             ~~~~~~~~~~~~~~~~~~~~~~~~~~^~
npm ERR!       |                                                       |
npm ERR!       |                                                       v8::Local<v8::Context>
npm ERR! ../../../nan/nan_converters_43_inl.h:40:1: note: in expansion of macro 'X'
npm ERR!    40 | X(bool, Boolean)
npm ERR!       | ^
npm ERR! /root/.cache/node-gyp/18.15.0/include/node/v8-value.h:408:30: note:   initializing argument 1 of 'bool v8::Value::BooleanValue(v8::Isolate*) const'
npm ERR!   408 |   bool BooleanValue(Isolate* isolate) const;
npm ERR!       |                     ~~~~~~~~~^~~~~~~
npm ERR! In file included from ../../../nan/nan_new.h:189,
npm ERR!                  from ../../../nan/nan.h:223:
npm ERR! ../../../nan/nan_implementation_12_inl.h: In static member function 'static Nan::imp::FactoryBase<v8::StringObject>::return_t Nan::imp::Factory<v8::StringObject>::New(v8::Local<v8::String>)':
npm ERR! ../../../nan/nan_implementation_12_inl.h:356:31: error: no matching function for call to 'v8::StringObject::New(v8::Local<v8::String>&)'
npm ERR!   356 |   return v8::StringObject::New(value).As<v8::StringObject>();
npm ERR!       |          ~~~~~~~~~~~~~~~~~~~~~^~~~~~~
npm ERR! In file included from /root/.cache/node-gyp/18.15.0/include/node/v8.h:47:
npm ERR! /root/.cache/node-gyp/18.15.0/include/node/v8-primitive-object.h:81:23: note: candidate: 'static v8::Local<v8::Value> v8::StringObject::New(v8::Isolate*, v8::Local<v8::String>)'
npm ERR!    81 |   static Local<Value> New(Isolate* isolate, Local<String> value);
npm ERR!       |                       ^~~
npm ERR! /root/.cache/node-gyp/18.15.0/include/node/v8-primitive-object.h:81:23: note:   candidate expects 2 arguments, 1 provided
npm ERR! ../../../nan/nan_implementation_12_inl.h:356:58: error: expected primary-expression before '>' token
npm ERR!   356 |   return v8::StringObject::New(value).As<v8::StringObject>();
npm ERR!       |                                                          ^
npm ERR! ../../../nan/nan_implementation_12_inl.h:356:60: error: expected primary-expression before ')' token
npm ERR!   356 |   return v8::StringObject::New(value).As<v8::StringObject>();
npm ERR!       |                                                            ^
npm ERR! ../../../nan/nan.h: In function 'void Nan::AsyncQueueWorker(AsyncWorker*)':
npm ERR! ../../../nan/nan.h:2216:7: warning: cast between incompatible function types from 'void (*)(uv_work_t*)' {aka 'void (*)(uv_work_s*)'} to 'uv_after_work_cb' {aka 'void (*)(uv_work_s*, int)'} [-Wcast-function-type]
npm ERR!  2216 |     , reinterpret_cast<uv_after_work_cb>(AsyncExecuteComplete)
npm ERR!       |       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
npm ERR! ../../../nan/nan.h: In function 'void Nan::SetAccessor(v8::Local<v8::ObjectTemplate>, v8::Local<v8::String>, GetterCallback, SetterCallback, v8::Local<v8::Value>, v8::AccessControl, v8::PropertyAttribute, imp::Sig)':
npm ERR! ../../../nan/nan.h:2454:19: warning: 'void v8::ObjectTemplate::SetAccessor(v8::Local<v8::Name>, v8::AccessorNameGetterCallback, v8::AccessorNameSetterCallback, v8::Local<v8::Value>, v8::AccessControl, v8::PropertyAttribute, v8::Local<v8::AccessorSignature>, v8::SideEffectType, v8::SideEffectType)' is deprecated: Do signature check in accessor [-Wdeprecated-declarations]
npm ERR!  2454 |   tpl->SetAccessor(
npm ERR!       |   ~~~~~~~~~~~~~~~~^
npm ERR!  2455 |       name
npm ERR!       |       ~~~~         
npm ERR!  2456 |     , getter_
npm ERR!       |     ~~~~~~~~~      
npm ERR!  2457 |     , setter_
npm ERR!       |     ~~~~~~~~~      
npm ERR!  2458 |     , obj
npm ERR!       |     ~~~~~          
npm ERR!  2459 |     , settings
npm ERR!       |     ~~~~~~~~~~     
npm ERR!  2460 |     , attribute
npm ERR!       |     ~~~~~~~~~~~    
npm ERR!  2461 |     , signature);
npm ERR!       |     ~~~~~~~~~~~~   
npm ERR! In file included from /root/.cache/node-gyp/18.15.0/include/node/v8-function.h:15,
npm ERR!                  from /root/.cache/node-gyp/18.15.0/include/node/v8.h:33:
npm ERR! /root/.cache/node-gyp/18.15.0/include/node/v8-template.h:838:8: note: declared here
npm ERR!   838 |   void SetAccessor(
npm ERR!       |        ^~~~~~~~~~~
npm ERR! In file included from /usr/include/c++/12.2.1/cassert:44,
npm ERR!                  from /root/.cache/node-gyp/18.15.0/include/node/node_object_wrap.h:26,
npm ERR!                  from ../../../nan/nan.h:55:
npm ERR! ../../../nan/nan_object_wrap.h: In destructor 'virtual Nan::ObjectWrap::~ObjectWrap()':
npm ERR! ../../../nan/nan_object_wrap.h:24:25: error: 'class Nan::Persistent<v8::Object>' has no member named 'IsNearDeath'
npm ERR!    24 |     assert(persistent().IsNearDeath());
npm ERR!       |                         ^~~~~~~~~~~
npm ERR! ../../../nan/nan_object_wrap.h: In static member function 'static void Nan::ObjectWrap::WeakCallback(const v8::WeakCallbackInfo<Nan::ObjectWrap>&)':
npm ERR! ../../../nan/nan_object_wrap.h:127:26: error: 'class Nan::Persistent<v8::Object>' has no member named 'IsNearDeath'
npm ERR!   127 |     assert(wrap->handle_.IsNearDeath());
npm ERR!       |                          ^~~~~~~~~~~
npm ERR! In file included from ../../../nan/nan.h:2802:
npm ERR! ../../../nan/nan_typedarray_contents.h: In constructor 'Nan::TypedArrayContents<T>::TypedArrayContents(v8::Local<v8::Value>)':
npm ERR! ../../../nan/nan_typedarray_contents.h:34:43: error: 'class v8::ArrayBuffer' has no member named 'GetContents'
npm ERR!    34 |       data   = static_cast<char*>(buffer->GetContents().Data()) + byte_offset;
npm ERR!       |                                           ^~~~~~~~~~~
npm ERR! ../src/addon.cc: In function 'void init(v8::Local<v8::Object>)':
npm ERR! ../src/addon.cc:16:52: error: no matching function for call to 'v8::FunctionTemplate::GetFunction()'
npm ERR!    16 |     Nan::New<FunctionTemplate>(verify)->GetFunction());
npm ERR!       |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~
npm ERR! /root/.cache/node-gyp/18.15.0/include/node/v8-template.h:513:46: note: candidate: 'v8::MaybeLocal<v8::Function> v8::FunctionTemplate::GetFunction(v8::Local<v8::Context>)'
npm ERR!   513 |   V8_WARN_UNUSED_RESULT MaybeLocal<Function> GetFunction(
npm ERR!       |                                              ^~~~~~~~~~~
npm ERR! /root/.cache/node-gyp/18.15.0/include/node/v8-template.h:513:46: note:   candidate expects 1 argument, 0 provided
npm ERR! ../src/addon.cc:20:58: error: no matching function for call to 'v8::FunctionTemplate::GetFunction()'
npm ERR!    20 |     Nan::New<FunctionTemplate>(get_altnames)->GetFunction());
npm ERR!       |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~
npm ERR! /root/.cache/node-gyp/18.15.0/include/node/v8-template.h:513:46: note: candidate: 'v8::MaybeLocal<v8::Function> v8::FunctionTemplate::GetFunction(v8::Local<v8::Context>)'
npm ERR!   513 |   V8_WARN_UNUSED_RESULT MaybeLocal<Function> GetFunction(
npm ERR!       |                                              ^~~~~~~~~~~
npm ERR! /root/.cache/node-gyp/18.15.0/include/node/v8-template.h:513:46: note:   candidate expects 1 argument, 0 provided
npm ERR! ../src/addon.cc:23:57: error: no matching function for call to 'v8::FunctionTemplate::GetFunction()'
npm ERR!    23 |     Nan::New<FunctionTemplate>(get_subject)->GetFunction());
npm ERR!       |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~
npm ERR! /root/.cache/node-gyp/18.15.0/include/node/v8-template.h:513:46: note: candidate: 'v8::MaybeLocal<v8::Function> v8::FunctionTemplate::GetFunction(v8::Local<v8::Context>)'
npm ERR!   513 |   V8_WARN_UNUSED_RESULT MaybeLocal<Function> GetFunction(
npm ERR!       |                                              ^~~~~~~~~~~
npm ERR! /root/.cache/node-gyp/18.15.0/include/node/v8-template.h:513:46: note:   candidate expects 1 argument, 0 provided
npm ERR! ../src/addon.cc:26:56: error: no matching function for call to 'v8::FunctionTemplate::GetFunction()'
npm ERR!    26 |     Nan::New<FunctionTemplate>(get_issuer)->GetFunction());
npm ERR!       |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~
npm ERR! /root/.cache/node-gyp/18.15.0/include/node/v8-template.h:513:46: note: candidate: 'v8::MaybeLocal<v8::Function> v8::FunctionTemplate::GetFunction(v8::Local<v8::Context>)'
npm ERR!   513 |   V8_WARN_UNUSED_RESULT MaybeLocal<Function> GetFunction(
npm ERR!       |                                              ^~~~~~~~~~~
npm ERR! /root/.cache/node-gyp/18.15.0/include/node/v8-template.h:513:46: note:   candidate expects 1 argument, 0 provided
npm ERR! ../src/addon.cc:29:56: error: no matching function for call to 'v8::FunctionTemplate::GetFunction()'
npm ERR!    29 |     Nan::New<FunctionTemplate>(parse_cert)->GetFunction());
npm ERR!       |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~
npm ERR! /root/.cache/node-gyp/18.15.0/include/node/v8-template.h:513:46: note: candidate: 'v8::MaybeLocal<v8::Function> v8::FunctionTemplate::GetFunction(v8::Local<v8::Context>)'
npm ERR!   513 |   V8_WARN_UNUSED_RESULT MaybeLocal<Function> GetFunction(
npm ERR!       |                                              ^~~~~~~~~~~
npm ERR! /root/.cache/node-gyp/18.15.0/include/node/v8-template.h:513:46: note:   candidate expects 1 argument, 0 provided
npm ERR! ../src/addon.cc: At global scope:
npm ERR! /root/.cache/node-gyp/18.15.0/include/node/node.h:978:7: warning: cast between incompatible function types from 'void (*)(v8::Local<v8::Object>)' to 'node::addon_register_func' {aka 'void (*)(v8::Local<v8::Object>, v8::Local<v8::Value>, void*)'} [-Wcast-function-type]
npm ERR!   978 |       (node::addon_register_func) (regfunc),                          \
npm ERR!       |       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
npm ERR! /root/.cache/node-gyp/18.15.0/include/node/node.h:1012:3: note: in expansion of macro 'NODE_MODULE_X'
npm ERR!  1012 |   NODE_MODULE_X(modname, regfunc, NULL, 0)  // NOLINT (readability/null_usage)
npm ERR!       |   ^~~~~~~~~~~~~
npm ERR! ../src/addon.cc:32:1: note: in expansion of macro 'NODE_MODULE'
npm ERR!    32 | NODE_MODULE(x509, init)
npm ERR!       | ^~~~~~~~~~~
npm ERR! make: *** [x509.target.mk:118: Release/obj.target/x509/src/addon.o] Error 1
npm ERR! gyp ERR! build error 
npm ERR! gyp ERR! stack Error: `make` failed with exit code: 2
npm ERR! gyp ERR! stack     at ChildProcess.onExit (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:203:23)
npm ERR! gyp ERR! stack     at ChildProcess.emit (node:events:513:28)
npm ERR! gyp ERR! stack     at ChildProcess._handle.onexit (node:internal/child_process:291:12)
npm ERR! gyp ERR! System Linux 5.19.0-38-generic
npm ERR! gyp ERR! command "/usr/local/bin/node" "/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
npm ERR! gyp ERR! cwd /chaincode/output/node_modules/@ampretia/x509
npm ERR! gyp ERR! node -v v18.15.0
npm ERR! gyp ERR! node-gyp -v v9.3.1
npm ERR! gyp ERR! not ok

npm ERR! A complete log of this run can be found in:
npm ERR!     /root/.npm/_logs/2023-04-04T06_59_45_641Z-debug-0.log
"